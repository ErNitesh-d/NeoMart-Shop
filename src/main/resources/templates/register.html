<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="~{base::layout(~{::section}, 'Register Page')}">
<head>
    <meta charset="ISO-8859-1">
</head>
<body>
    <section>
        <style>
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(20px); }
                to { opacity: 1; transform: translateY(0); }
            }
            @keyframes slideInLeft {
                from { opacity: 0; transform: translateX(-30px); }
                to { opacity: 1; transform: translateX(0); }
            }
            @keyframes slideInRight {
                from { opacity: 0; transform: translateX(30px); }
                to { opacity: 1; transform: translateX(0); }
            }
            @keyframes pulse {
                0% { transform: scale(1); }
                50% { transform: scale(1.05); }
                100% { transform: scale(1); }
            }
            @keyframes gradientBG {
                0% { background-position: 0% 50%; }
                50% { background-position: 100% 50%; }
                100% { background-position: 0% 50%; }
            }
            @keyframes bounce {
                0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
                40% { transform: translateY(-10px); }
                60% { transform: translateY(-5px); }
            }
            html, body {
                margin: 0;
                padding: 0;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                background: linear-gradient(135deg, rgb(255, 255, 255) 0%, rgb(255, 255, 255) 100%);
                background-size: 400% 400%;
                animation: gradientBG 15s ease infinite;
                height: 100%;
                overflow-x: hidden;
            }
            input:focus::placeholder {
                opacity: 0;
                transform: translateX(10px);
                transition: all 0.3s ease;
            }
            input::placeholder {
                transition: all 0.3s ease;
            }
            .hover-lift {
                transition: transform 0.3s ease, box-shadow 0.3s ease;
            }
            .hover-lift:hover {
                transform: translateY(-5px);
                box-shadow: 0 20px 30px rgba(50, 50, 93, 0.15), 0 10px 15px rgba(0, 0, 0, 0.1);
            }
        </style>

         <div style="width: 100%; max-width: 1200px; margin: 7% auto; padding: 0 10px; margin-bottom: 2%;">
            <div style="display: flex; flex-wrap: wrap; align-items: center; justify-content: center; box-shadow: 0 15px 35px rgba(50, 50, 93, 0.1), 0 5px 15px rgba(0, 0, 0, 0.07); border-radius: 12px; overflow: hidden; background-color: #ffffff;">
                <!-- Left side with image and text -->
                <div style="flex: 0 0 40%; padding: 0; background: linear-gradient(45deg, #6a11cb 0%, #2575fc 100%); position: relative; min-height: 600px; display: flex; flex-direction: column; justify-content: center; align-items: center; color: white;">
                    <img src="img/ecom.png" style="width: 80%; max-width: 300px; margin-bottom: 30px; border-radius: 10px; box-shadow: 0 10px 20px rgba(0,0,0,0.2);" alt="E-commerce illustration">
                    <div style="text-align: center; padding: 0 30px;">
                        <h2 style="font-size: 28px; margin-bottom: 15px; font-weight: 600;">Welcome to Our Shop</h2>
                        <p style="font-size: 16px; line-height: 1.6; margin-bottom: 20px;">Join our community and discover amazing products with exclusive member benefits.</p>
                        <div style="display: flex; justify-content: center; margin-top: 20px;">
                            <div style="margin: 0 10px; text-align: center;">
                                <div style="font-size: 24px; font-weight: bold;">500+</div>
                                <div style="font-size: 14px;">Products</div>
                            </div>
                            <div style="margin: 0 10px; text-align: center;">
                                <div style="font-size: 24px; font-weight: bold;">10k+</div>
                                <div style="font-size: 14px;">Users</div>
                            </div>
                            <div style="margin: 0 10px; text-align: center;">
                                <div style="font-size: 24px; font-weight: bold;">4.8</div>
                                <div style="font-size: 14px;">Rating</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right side with form -->
                <div style="flex: 0 0 60%; padding: 40px;">
					<div style="margin-bottom: 30px; text-align: center;">
					        <h1 style="font-size: 32px; color: #333; margin-bottom: 10px; font-weight: 700;">Create Your Account</h1>
					        <p style="color: #666; font-size: 16px;">Please fill in the information below</p>
					        <!-- Alert messages -->
					        <div th:if="${session.succMsg}" style="background-color: #d4edda; color: #155724; padding: 12px; border-radius: 5px; margin: 15px 0; border-left: 4px solid #28a745;">
					            <p style="margin: 0; font-weight: 500;" id="succMsg">[[${session.succMsg}]]</p>
					            <th:block th:text="${@commonServiceImpl.removeSessionMessage()}"></th:block>
					        </div>
					        <div th:if="${session.errorMsg}" style="background-color: #f8d7da; color: #721c24; padding: 12px; border-radius: 5px; margin: 15px 0; border-left: 4px solid #dc3545;">
					            <p style="margin: 0; font-weight: 500;" id="errorMsg">[[${session.errorMsg}]]</p>
					            <th:block th:text="${@commonServiceImpl.removeSessionMessage()}"></th:block>
					        </div>
					    </div>

                    <form action="/saveUser" enctype="multipart/form-data" id="userRegister" novalidate method="post" style="font-family: 'Segoe UI', Roboto, Arial, sans-serif; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); border-radius: 12px; padding: 40px; box-shadow: 0 15px 30px rgba(0,0,0,0.15); max-width: 650px; margin: auto; transition: all 0.3s ease; position: relative; overflow: hidden;">
                        <input type="hidden" id="joinedDate" name="joinedDate">

                        <!-- Progress Bar -->
                        <div style="margin-bottom: 30px; position: relative; height: 6px; background: rgba(255,255,255,0.5); border-radius: 10px; overflow: hidden;">
                            <div id="progressBar" style="position: absolute; height: 100%; width: 25%; background: linear-gradient(90deg, #4776E6 0%, #8E54E9 100%); border-radius: 10px; transition: width 0.5s ease-in-out;"></div>
                        </div>

                        <!-- Step Indicators -->
                        <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
                            <div id="step1Indicator" style="width: 22%; text-align: center; color: #4776E6; font-weight: bold; position: relative;">
                                <div style="width: 30px; height: 30px; border-radius: 50%; background: #4776E6; color: white; display: flex; align-items: center; justify-content: center; margin: 0 auto 8px;">1</div>
                                <span>Personal</span>
                                <div style="height: 3px; width: 100%; background: #4776E6; position: absolute; right: -50%; top: 15px; z-index: -1;"></div>
                            </div>
                            <div id="step2Indicator" style="width: 22%; text-align: center; color: #888; position: relative;">
                                <div style="width: 30px; height: 30px; border-radius: 50%; background: #e0e0e0; color: #888; display: flex; align-items: center; justify-content: center; margin: 0 auto 8px; transition: all 0.3s ease;">2</div>
                                <span>Address</span>
                                <div style="height: 3px; width: 100%; background: #e0e0e0; position: absolute; right: -50%; top: 15px; z-index: -1;"></div>
                            </div>
                            <div id="step3Indicator" style="width: 22%; text-align: center; color: #888; position: relative;">
                                <div style="width: 30px; height: 30px; border-radius: 50%; background: #e0e0e0; color: #888; display: flex; align-items: center; justify-content: center; margin: 0 auto 8px; transition: all 0.3s ease;">3</div>
                                <span>Security</span>
                                <div style="height: 3px; width: 100%; background: #e0e0e0; position: absolute; right: -50%; top: 15px; z-index: -1;"></div>
                            </div>
                            <div id="step4Indicator" style="width: 22%; text-align: center; color: #888;">
                                <div style="width: 30px; height: 30px; border-radius: 50%; background: #e0e0e0; color: #888; display: flex; align-items: center; justify-content: center; margin: 0 auto 8px; transition: all 0.3s ease;">4</div>
                                <span>Profile</span>
                            </div>
                        </div>

                        <!-- Step 1: Personal Information -->
                        <div class="step" id="step1" style="animation: fadeIn 0.5s ease;">
                            <h3 style="color: #4776E6; font-size: 22px; margin-bottom: 25px; font-weight: 600;">Personal Information</h3>
                            <div style="display: flex; gap: 20px; margin-bottom: 25px;">
                                <div style="flex: 1; position: relative;">
                                    <label style="display: block; margin-bottom: 8px; font-weight: 500; color: #555; transition: all 0.3s;">Full Name</label>
                                    <input required name="name" type="text" placeholder="John Doe" style="width: 100%; padding: 12px 15px; border-radius: 8px; border: 2px solid #e0e0e0; background: rgba(255,255,255,0.9); transition: all 0.3s; font-size: 15px; outline: none;" onFocus="this.style.borderColor='#4776E6';" onBlur="this.style.borderColor='#e0e0e0';">
                                    <span class="error-message" style="color: #ff3e61; font-size: 12px; position: absolute; bottom: -20px; left: 0; display: none;">Please enter your full name</span>
                                </div>
                                <div style="flex: 1; position: relative;">
                                    <label style="display: block; margin-bottom: 8px; font-weight: 500; color: #555; transition: all 0.3s;">Mobile Number</label>
                                    <input required name="mobileNumber" type="tel" placeholder="1234567890" style="width: 100%; padding: 12px 15px; border-radius: 8px; border: 2px solid #e0e0e0; background: rgba(255,255,255,0.9); transition: all 0.3s; font-size: 15px; outline: none;" onFocus="this.style.borderColor='#4776E6';" onBlur="this.style.borderColor='#e0e0e0';">
                                    <span class="error-message" style="color: #ff3e61; font-size: 12px; position: absolute; bottom: -20px; left: 0; display: none;">Please enter a valid mobile number</span>
                                </div>
                                <div style="position: relative; margin-bottom: 25px;">
                                    <label style="display: block; margin-bottom: 8px; font-weight: 500; color: #555;">Email</label>
                                    <div style="position: relative;">
                                        <div style="position: absolute; left: 15px; top: 13px; color: #aaa;">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
                                        </div>
                                        <input required name="email" type="email" placeholder="email@example.com" style="width: 100%; padding: 12px 15px 12px 45px; border-radius: 8px; border: 2px solid #e0e0e0; background: rgba(255,255,255,0.9); transition: all 0.3s; font-size: 15px; outline: none;" onFocus="this.style.borderColor='#4776E6';" onBlur="this.style.borderColor='#e0e0e0';">
                                    </div>
                                    <span class="error-message" style="color: #ff3e61; font-size: 12px; position: absolute; bottom: -20px; left: 0; display: none;">Please enter a valid email address</span>
                                </div>
                            </div>
                            <button type="button" onclick="nextStep(2)" style="background: linear-gradient(90deg, #4776E6 0%, #8E54E9 100%); color: white; border: none; padding: 14px 25px; border-radius: 8px; cursor: pointer; font-weight: 600; width: 100%; transition: all 0.3s; box-shadow: 0 4px 15px rgba(71, 118, 230, 0.3);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 20px rgba(71, 118, 230, 0.4)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(71, 118, 230, 0.3)';">Next: Address</button>
                        </div>

                        <!-- Step 2: Address Information -->
                        <div class="step" id="step2" style="display: none; animation: fadeIn 0.5s ease;">
                            <h3 style="color: #4776E6; font-size: 22px; margin-bottom: 25px; font-weight: 600;">Address Information</h3>
                            <div style="display: flex; gap: 20px; margin-bottom: 25px;">
                                <div style="flex: 1; position: relative;">
                                    <label style="display: block; margin-bottom: 8px; font-weight: 500; color: #555;">Address</label>
                                    <input required name="address" type="text" placeholder="123 Main St" style="width: 100%; padding: 12px 15px; border-radius: 8px; border: 2px solid #e0e0e0; background: rgba(255,255,255,0.9); transition: all 0.3s; font-size: 15px; outline: none;" onFocus="this.style.borderColor='#4776E6';" onBlur="this.style.borderColor='#e0e0e0';">
                                    <span class="error-message" style="color: #ff3e61; font-size: 12px; position: absolute; bottom: -20px; left: 0; display: none;">Please enter your address</span>
                                </div>
                                <div style="flex: 1; position: relative;">
                                    <label style="display: block; margin-bottom: 8px; font-weight: 500; color: #555;">City</label>
                                    <input required name="city" type="text" placeholder="Rajkot" style="width: 100%; padding: 12px 15px; border-radius: 8px; border: 2px solid #e0e0e0; background: rgba(255,255,255,0.9); transition: all 0.3s; font-size: 15px; outline: none;" onFocus="this.style.borderColor='#4776E6';" onBlur="this.style.borderColor='#e0e0e0';">
                                    <span class="error-message" style="color: #ff3e61; font-size: 12px; position: absolute; bottom: -20px; left: 0; display: none;">Please enter your city</span>
                                </div>
                                <div style="flex: 1; position: relative;">
                                    <label style="display: block; margin-bottom: 8px; font-weight: 500; color: #555;">Pincode</label>
                                    <input required name="pincode" type="text" placeholder="123465" style="width: 100%; padding: 12px 15px; border-radius: 8px; border: 2px solid #e0e0e0; background: rgba(255,255,255,0.9); transition: all 0.3s; font-size: 15px; outline: none;" onFocus="this.style.borderColor='#4776E6';" onBlur="this.style.borderColor='#e0e0e0';">
                                    <span class="error-message" style="color: #ff3e61; font-size: 12px; position: absolute; bottom: -20px; left: 0; display: none;">Please enter your pincode</span>
                                </div>
                                <div style="flex: 1; position: relative;">
                                    <label style="display: block; margin-bottom: 8px; font-weight: 500; color: #555;">State</label>
                                    <input required name="state" type="text" placeholder="Gujarat" style="width: 100%; padding: 12px 15px; border-radius: 8px; border: 2px solid #e0e0e0; background: rgba(255,255,255,0.9); transition: all 0.3s; font-size: 15px; outline: none;" onFocus="this.style.borderColor='#4776E6';" onBlur="this.style.borderColor='#e0e0e0';">
                                    <span class="error-message" style="color: #ff3e61; font-size: 12px; position: absolute; bottom: -20px; left: 0; display: none;">Please enter your state</span>
                                </div>
                            </div>
                            <div style="display: flex; gap: 15px;">
                                <button type="button" onclick="prevStep(1)" style="background: rgba(0,0,0,0.1); color: #555; border: none; padding: 14px 25px; border-radius: 8px; cursor: pointer; font-weight: 600; flex: 1; transition: all 0.3s;" onmouseover="this.style.background='rgba(0,0,0,0.15)';" onmouseout="this.style.background='rgba(0,0,0,0.1)';">Previous</button>
                                <button type="button" onclick="nextStep(3)" style="background: linear-gradient(90deg, #4776E6 0%, #8E54E9 100%); color: white; border: none; padding: 14px 25px; border-radius: 8px; cursor: pointer; font-weight: 600; flex: 2; transition: all 0.3s; box-shadow: 0 4px 15px rgba(71, 118, 230, 0.3);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 20px rgba(71, 118, 230, 0.4)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(71, 118, 230, 0.3)';">Next: Security</button>
                            </div>
                        </div>

                        <!-- Step 3: Security Information -->
                        <div class="step" id="step3" style="display: none; animation: fadeIn 0.5s ease;">
                            <h3 style="color: #4776E6; font-size: 22px; margin-bottom: 25px; font-weight: 600;">Security Information</h3>
                            <div style="display: flex; gap: 20px; margin-bottom: 25px;">
                                <div style="flex: 1; position: relative;">
                                    <label style="display: block; margin-bottom: 8px; font-weight: 500; color: #555;">Password</label>
                                    <div style="position: relative;">
                                        <input required name="password" type="password" id="password" placeholder="••••••••" style="width: 100%; padding: 12px 15px; border-radius: 8px; border: 2px solid #e0e0e0; background: rgba(255,255,255,0.9); transition: all 0.3s; font-size: 15px; outline: none;" onFocus="this.style.borderColor='#4776E6';" onBlur="this.style.borderColor='#e0e0e0';">
                                        <div id="togglePassword" onclick="togglePasswordVisibility('password')" style="position: absolute; right: 15px; top: 13px; cursor: pointer; color: #aaa;">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                        </div>
                                    </div>
                                    <span class="error-message" style="color: #ff3e61; font-size: 12px; position: absolute; bottom: -20px; left: 0; display: none;">Password must be at least 8 characters</span>
                                </div>
                                <div style="flex: 1; position: relative;">
                                    <label style="display: block; margin-bottom: 8px; font-weight: 500; color: #555;">Confirm Password</label>
                                    <div style="position: relative;">
                                        <input required name="confirmpassword" type="password" id="confirmPassword" placeholder="••••••••" style="width: 100%; padding: 12px 15px; border-radius: 8px; border: 2px solid #e0e0e0; background: rgba(255,255,255,0.9); transition: all 0.3s; font-size: 15px; outline: none;" onFocus="this.style.borderColor='#4776E6';" onBlur="this.style.borderColor='#e0e0e0';">
                                        <div id="toggleConfirmPassword" onclick="togglePasswordVisibility('confirmPassword')" style="position: absolute; right: 15px; top: 13px; cursor: pointer; color: #aaa;">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                        </div>
                                    </div>
                                    <span class="error-message" style="color: #ff3e61; font-size: 12px; position: absolute; bottom: -20px; left: 0; display: none;">Passwords do not match</span>
                                </div>
                            </div>
                            <div style="margin-bottom: 30px; height: 8px; width: 100%; background: #e0e0e0; border-radius: 5px; overflow: hidden;">
                                <div id="passwordStrength" style="height: 100%; width: 0%; transition: width 0.3s ease, background-color 0.3s ease;"></div>
                            </div>
                            <div style="display: flex; gap: 15px;">
                                <button type="button" onclick="prevStep(2)" style="background: rgba(0,0,0,0.1); color: #555; border: none; padding: 14px 25px; border-radius: 8px; cursor: pointer; font-weight: 600; flex: 1; transition: all 0.3s;" onmouseover="this.style.background='rgba(0,0,0,0.15)';" onmouseout="this.style.background='rgba(0,0,0,0.1)';">Previous</button>
                                <button type="button" onclick="nextStep(4)" style="background: linear-gradient(90deg, #4776E6 0%, #8E54E9 100%); color: white; border: none; padding: 14px 25px; border-radius: 8px; cursor: pointer; font-weight: 600; flex: 2; transition: all 0.3s; box-shadow: 0 4px 15px rgba(71, 118, 230, 0.3);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 20px rgba(71, 118, 230, 0.4)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(71, 118, 230, 0.3)';">Next: Profile</button>
                            </div>
                        </div>

						<!-- Step 4: Profile Information -->
						<div class="step" id="step4" style="display: none; animation: fadeIn 0.5s ease;">
						    <h3 style="color: #4776E6; font-size: 22px; margin-bottom: 25px; font-weight: 600;">Profile Information</h3>
						    <label style="display: block; margin-bottom: 15px; font-weight: 500; color: #555;">Profile Image</label>
						    <div id="dropArea" style="border: 2px dashed #ccc; padding: 40px 20px; text-align: center; border-radius: 10px; background-color: rgba(255,255,255,0.6); margin-bottom: 30px; position: relative; transition: all 0.3s ease; cursor: pointer;" 
						         onmouseover="this.style.borderColor='#4776E6'; this.style.backgroundColor='rgba(255,255,255,0.8)';" 
						         onmouseout="this.style.borderColor='#ccc'; this.style.backgroundColor='rgba(255,255,255,0.6)';" 
						         onclick="document.getElementById('fileInput').click();">
						        <input id="fileInput" name="img" type="file" accept="image/*" style="opacity: 0; position: absolute; width: 100%; height: 100%; cursor: pointer; top: 0; left: 0; pointer-events: none;">
						        <div id="uploadIcon" style="margin-bottom: 15px;">
						            <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 24 24" fill="none" stroke="#4776E6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>
						        </div>
						        <div id="previewContainer" style="display: none; margin-bottom: 15px; position: relative;">
						            <img id="imagePreview" src="" alt="Preview" style="max-width: 150px; max-height: 150px; border-radius: 50%; object-fit: cover; border: 3px solid #4776E6;">
						            <div id="removeImage" style="position: absolute; top: -10px; right: calc(50% - 85px); background: #ff3e61; color: white; width: 25px; height: 25px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 18px;">×</div>
						        </div>
						        <p style="color: #666; font-size: 16px; margin-bottom: 5px;">Click to upload or drag and drop</p>
						        <p style="color: #888; font-size: 14px;">SVG, PNG, JPG, or GIF (max. 800x400px)</p>
						    </div>

						    <div style="margin-bottom: 25px;">
						        <label style="display: flex; align-items: center; margin-bottom: 15px; cursor: pointer;">
						            <div style="width: 22px; height: 22px; border: 2px solid #4776E6; border-radius: 4px; margin-right: 10px; position: relative; display: flex; align-items: center; justify-content: center; transition: all 0.2s;">
						                <input type="checkbox" required style="opacity: 0; position: absolute; cursor: pointer;" onchange="if(this.checked) {this.parentNode.innerHTML += '<svg xmlns=\'http://www.w3.org/2000/svg\' width=\'16\' height=\'16\' viewBox=\'0 0 24 24\' fill=\'none\' stroke=\'#4776E6\' stroke-width=\'3\' stroke-linecap=\'round\' stroke-linejoin=\'round\'><polyline points=\'20 6 9 17 4 12\'></polyline></svg>'; this.parentNode.style.background = '#e6f0ff';} else {this.parentNode.innerHTML = ''; this.parentNode.style.background = 'transparent';}">
						            </div>
						            <span style="font-size: 15px; color: #555;">I agree to the <a href="#" style="color: #4776E6; text-decoration: none; font-weight: 500; transition: all 0.3s;" onmouseover="this.style.textDecoration='underline';" onmouseout="this.style.textDecoration='none';">Terms of Service</a> and <a href="#" style="color: #4776E6; text-decoration: none; font-weight: 500; transition: all 0.3s;" onmouseover="this.style.textDecoration='underline';" onmouseout="this.style.textDecoration='none';">Privacy Policy</a></span>
						        </label>
						        <label style="display: flex; align-items: center; cursor: pointer;">
						            <div style="width: 22px; height: 22px; border: 2px solid #4776E6; border-radius: 4px; margin-right: 10px; position: relative; display: flex; align-items: center; justify-content: center; transition: all 0.2s;">
						                <input type="checkbox" style="opacity: 0; position: absolute; cursor: pointer;" onchange="if(this.checked) {this.parentNode.innerHTML += '<svg xmlns=\'http://www.w3.org/2000/svg\' width=\'16\' height=\'16\' viewBox=\'0 0 24 24\' fill=\'none\' stroke=\'#4776E6\' stroke-width=\'3\' stroke-linecap=\'round\' stroke-linejoin=\'round\'><polyline points=\'20 6 9 17 4 12\'></polyline></svg>'; this.parentNode.style.background = '#e6f0ff';} else {this.parentNode.innerHTML = ''; this.parentNode.style.background = 'transparent';}">
						            </div>
						            <span style="font-size: 15px; color: #555;">Subscribe to our newsletter</span>
						        </label>
						    </div>

						    <div style="display: flex; gap: 15px;">
						        <button type="button" onclick="prevStep(3)" style="background: rgba(0,0,0,0.1); color: #555; border: none; padding: 14px 25px; border-radius: 8px; cursor: pointer; font-weight: 600; flex: 1; transition: all 0.3s;" onmouseover="this.style.background='rgba(0,0,0,0.15)';" onmouseout="this.style.background='rgba(0,0,0,0.1)';">Previous</button>
						        <button type="submit" style="background: linear-gradient(90deg, #28a745 0%, #20c997 100%); color: white; border: none; padding: 14px 25px; border-radius: 8px; cursor: pointer; font-weight: 600; flex: 2; transition: all 0.3s; box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 20px rgba(40, 167, 69, 0.4)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(40, 167, 69, 0.3)';">Complete Registration</button>
						    </div>
						</div>


                        <!-- Confetti Effect (Hidden Initially) -->
                       <div id="confetti" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; display: none;"></div>
					   
                        <script>
                            // Set joined date
                            document.getElementById('joinedDate').value = new Date().toISOString().split("T")[0];

                            // Current step tracking
                            let currentStep = 1;

                            // Function to update progress bar and step indicators
                            function updateProgress(step) {
                                const progressBar = document.getElementById('progressBar');
                                progressBar.style.width = ((step - 1) * 100 / 3) + '%'; // Corrected to 3 segments for 4 steps

                                // Update step indicators
                                for (let i = 1; i <= 4; i++) {
                                    const indicator = document.getElementById('step' + i + 'Indicator');
                                    const circle = indicator.querySelector('div:first-child');
                                    const line = i < 4 ? indicator.querySelector('div:last-child') : null;

                                    if (i <= step) {
                                        indicator.style.color = '#4776E6';
                                        circle.style.background = '#4776E6';
                                        circle.style.color = 'white';
                                        circle.innerHTML = i <= step ? '<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>' : i;
                                        if (line && i < step) line.style.background = '#4776E6';
                                    } else {
                                        indicator.style.color = '#888';
                                        circle.style.background = '#e0e0e0';
                                        circle.style.color = '#888';
                                        circle.innerHTML = i;
                                        if (line) line.style.background = '#e0e0e0';
                                    }
                                }
                            }

                            // Validate current step
                            function validateStep(step) {
                                const currentStepDiv = document.getElementById('step' + step);
                                const requiredFields = currentStepDiv.querySelectorAll('input[required]');
                                let isValid = true;

                                requiredFields.forEach(field => {
                                    if (!field.value.trim()) {
                                        isValid = false;
                                        field.style.borderColor = '#ff3e61';
                                        const errorMsg = field.parentNode.querySelector('.error-message') || field.parentNode.parentNode.querySelector('.error-message');
                                        if (errorMsg) errorMsg.style.display = 'block';
                                    } else {
                                        field.style.borderColor = '#e0e0e0';
                                        const errorMsg = field.parentNode.querySelector('.error-message') || field.parentNode.parentNode.querySelector('.error-message');
                                        if (errorMsg) errorMsg.style.display = 'none';
                                    }
                                });

                                if (step === 3) {
                                    const password = document.getElementById('password').value;
                                    const confirmPassword = document.getElementById('confirmPassword').value;
                                    if (password !== confirmPassword) {
                                        isValid = false;
                                        document.getElementById('confirmPassword').style.borderColor = '#ff3e61';
                                        document.getElementById('confirmPassword').parentNode.parentNode.querySelector('.error-message').style.display = 'block';
                                    }
                                }

                                return isValid;
                            }

                            // Function to navigate to next step
                            function nextStep(step) {
                                if (validateStep(currentStep)) {
                                    document.getElementById('step' + currentStep).style.display = 'none';
                                    document.getElementById('step' + step).style.display = 'block';
                                    setTimeout(() => {
                                        document.getElementById('step' + step).style.animation = 'fadeIn 0.5s ease';
                                    }, 10);
                                    currentStep = step;
                                    updateProgress(step);
                                }
                            }

                            // Function to navigate to previous step
                            function prevStep(step) {
                                document.getElementById('step' + currentStep).style.display = 'none';
                                document.getElementById('step' + step).style.display = 'block';
                                setTimeout(() => {
                                    document.getElementById('step' + step).style.animation = 'fadeIn 0.5s ease';
                                }, 10);
                                currentStep = step;
                                updateProgress(step);
                            }

                            // Password visibility toggle
                            function togglePasswordVisibility(inputId) {
                                const input = document.getElementById(inputId);
                                input.type = input.type === 'password' ? 'text' : 'password';
                                const icon = document.getElementById('toggle' + inputId.charAt(0).toUpperCase() + inputId.slice(1));
                                if (input.type === 'text') {
                                    icon.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line></svg>';
                                } else {
                                    icon.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>';
                                }
                            }

                            // Password strength meter
                            document.getElementById('password').addEventListener('input', function() {
                                const password = this.value;
                                const strength = checkPasswordStrength(password);
                                const strengthBar = document.getElementById('passwordStrength');
                                strengthBar.style.width = strength + '%';
                                if (strength < 30) {
                                    strengthBar.style.backgroundColor = '#ff3e61';
                                } else if (strength < 60) {
                                    strengthBar.style.backgroundColor = '#ffb03a';
                                } else {
                                    strengthBar.style.backgroundColor = '#28a745';
                                }
                            });

                            function checkPasswordStrength(password) {
                                let strength = 0;
                                if (password.length > 6) strength += 20;
                                if (password.length > 10) strength += 10;
                                if (/[A-Z]/.test(password)) strength += 20;
                                if (/[a-z]/.test(password)) strength += 15;
                                if (/[0-9]/.test(password)) strength += 15;
                                if (/[^A-Za-z0-9]/.test(password)) strength += 20;
                                return Math.min(100, strength);
                            }

							// File upload handling for click
							document.getElementById('fileInput').addEventListener('change', function() {
							    const file = this.files[0];
							    if (file) {
							        const reader = new FileReader();
							        reader.onload = function(e) {
							            document.getElementById('uploadIcon').style.display = 'none';
							            document.getElementById('previewContainer').style.display = 'block';
							            document.getElementById('imagePreview').src = e.target.result;
							        };
							        reader.readAsDataURL(file);
							    }
							});

							// Drag-and-drop handling
							const dropArea = document.getElementById('dropArea');
							const fileInput = document.getElementById('fileInput');

							// Prevent default behavior for drag events
							dropArea.addEventListener('dragover', (e) => {
							    e.preventDefault();
							    dropArea.style.borderColor = '#4776E6';
							    dropArea.style.backgroundColor = 'rgba(255,255,255,0.8)';
							});

							dropArea.addEventListener('dragleave', (e) => {
							    e.preventDefault();
							    dropArea.style.borderColor = '#ccc';
							    dropArea.style.backgroundColor = 'rgba(255,255,255,0.6)';
							});

							dropArea.addEventListener('drop', (e) => {
							    e.preventDefault();
							    dropArea.style.borderColor = '#ccc';
							    dropArea.style.backgroundColor = 'rgba(255,255,255,0.6)';

							    const files = e.dataTransfer.files;
							    if (files.length > 0) {
							        const file = files[0];
							        // Validate file type (optional)
							        if (file.type.startsWith('image/')) {
							            fileInput.files = files; // Assign the dropped file to the file input
							            const reader = new FileReader();
							            reader.onload = function(e) {
							                document.getElementById('uploadIcon').style.display = 'none';
							                document.getElementById('previewContainer').style.display = 'block';
							                document.getElementById('imagePreview').src = e.target.result;
							            };
							            reader.readAsDataURL(file);
							        } else {
							            alert('Please drop an image file (SVG, PNG, JPG, or GIF).');
							        }
							    }
							});

							// Remove image functionality
							document.getElementById('removeImage').addEventListener('click', () => {
							    document.getElementById('uploadIcon').style.display = 'block';
							    document.getElementById('previewContainer').style.display = 'none';
							    document.getElementById('imagePreview').src = '';
							    document.getElementById('fileInput').value = ''; // Clear the file input
							});

							document.getElementById('removeImage').addEventListener('click', function(e) {
							    e.stopPropagation();
							    document.getElementById('fileInput').value = '';
							    document.getElementById('uploadIcon').style.display = 'block';
							    document.getElementById('previewContainer').style.display = 'none';
							});

                            // Form submission
                            document.getElementById('userRegister').addEventListener('submit', function(e) {
                                e.preventDefault();
                                if (validateStep(currentStep)) {
                                    // Uncomment the line below to actually submit the form
                                    this.submit();
                                    // showSuccessAnimation(); // Uncomment if you want the animation instead
                                }
                            });

                            // Success animation with confetti
                            function showSuccessAnimation() {
                                document.querySelectorAll('.step').forEach(step => step.style.display = 'none');
                                const successDiv = document.createElement('div');
                                successDiv.innerHTML = `
                                    <div style="text-align: center; padding: 40px 20px; animation: bounceIn 0.8s ease;">
                                        <div style="width: 80px; height: 80px; background: #28a745; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
                                        </div>
                                        <h2 style="color: #333; margin-bottom: 15px; font-size: 24px;">Registration Successful!</h2>
                                        <p style="color: #666; margin-bottom: 30px; font-size: 16px;">Thank you for registering with us.</p>
										<a href="/signin" style="display: inline-block; padding: 12px 30px; background: linear-gradient(90deg, #4776E6 0%, #8E54E9 100%); color: white; text-decoration: none; font-size: 16px; font-weight: 600; border-radius: 25px; box-shadow: 0 4px 15px rgba(71, 118, 230, 0.3); transition: all 0.3s ease; animation: pulse 1.5s infinite;" 
							               onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 8px 20px rgba(71, 118, 230, 0.5)';" 
							               onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(71, 118, 230, 0.3)';">
							                Login Now
							          </a>
                                    </div>
                                `;
                                document.getElementById('userRegister').appendChild(successDiv);
                                showConfetti();
                            }

                            function showConfetti() {
                                const confettiElement = document.getElementById('confetti');
                                confettiElement.style.display = 'block';
                                for (let i = 0; i < 100; i++) {
                                    const confetti = document.createElement('div');
                                    confetti.style.position = 'absolute';
                                    confetti.style.width = Math.random() * 10 + 5 + 'px';
                                    confetti.style.height = Math.random() * 5 + 5 + 'px';
                                    confetti.style.backgroundColor = getRandomColor();
                                    confetti.style.borderRadius = '50%';
                                    confetti.style.opacity = Math.random() + 0.5;
                                    confetti.style.left = Math.random() * 100 + '%';
                                    confetti.style.top = '0';
                                    confetti.style.animation = `fall ${Math.random() * 3 + 2}s linear forwards`;
                                    confettiElement.appendChild(confetti);
                                }
                            }

                            function getRandomColor() {
                                const colors = ['#4776E6', '#8E54E9', '#ff3e61', '#ffb03a', '#28a745', '#20c997'];
                                return colors[Math.floor(Math.random() * colors.length)];
                            }

                            // Additional animations
                            const style = document.createElement('style');
                            style.innerHTML = `
                                @keyframes fadeIn {
                                    from { opacity: 0; transform: translateY(20px); }
                                    to { opacity: 1; transform: translateY(0); }
                                }
                                @keyframes bounceIn {
                                    0% { opacity: 0; transform: scale(0.3); }
                                    50% { opacity: 1; transform: scale(1.05); }
                                    70% { transform: scale(0.9); }
                                    100% { transform: scale(1); }
                                }
                                @keyframes fall {
                                    to {
                                        top: 100%;
                                        transform: rotate(360deg);
                                    }
                                }
                            `;
                            document.head.appendChild(style);

						

			            // Check for success message on page load
			            document.addEventListener('DOMContentLoaded', function() {
			                const succMsg = document.getElementById('succMsg');
			                const errorMsg = document.getElementById('errorMsg');
			                if (succMsg && !errorMsg) {
			                    showSuccessAnimation();
			                }
			                updateProgress(1); // Initialize progress
			            });
			        </script>
                    </form>
                </div>
            </div>
        </div>
    </section>
</body>
</html>